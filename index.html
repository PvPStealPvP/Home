<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF‑8" />
  <meta name="viewport" content="width=device‑width,initial‑scale=1.0"/>
  <title>PvPStealPvP</title>
  <script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-950 text-white font-sans">

<header class="bg-gray-900 p-5 shadow-md">
  <div class="container mx-auto flex justify-between items-center">
    <h1 class="text-3xl font-bold text-emerald-400">PvPStealPvP</h1>
    <div class="flex items-center">
      <span class="bg-emerald-600 text-black font-bold px-4 py-2 rounded-lg">IP: pvpstealpvp.minehut.gg</span>
      <a href="https://discord.gg/yourInviteCode" target="_blank" rel="noopener noreferrer"
         class="ml-4 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold px-4 py-2 rounded-lg inline-flex items-center space-x-2">
        <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/discord.svg" alt="Discord" class="w-5 h-5"/>
        <span>Join Discord</span>
      </a>
    </div>
  </div>
</header>

  <main class="flex flex-col md:flex-row p-6 gap-6">

    <aside class="w-full md:w-1/4 bg-gray-900 p-4 rounded-xl shadow-lg">
      <h2 class="text-xl font-bold text-emerald-300 mb-4">Staff</h2>
      <div id="staffList" class="space-y-4 text-sm text-center">
        <p id="staffError" class="text-red-500 text-xs"></p>
      </div>
    </aside>

    <section class="w-full md:w-3/4 bg-gray-900 p-6 rounded-xl shadow-lg">
      <h2 class="text-2xl font-bold text-emerald-300 mb-4">Top Players</h2>
      <div class="bg-gray-800 rounded-lg overflow-hidden">
        <table class="w-full text-left table-auto text-sm">
          <thead>
            <tr class="bg-gray-700 text-emerald-400">
              <th class="p-3">#</th>
              <th class="p-3">Player</th>
            </tr>
          </thead>
          <tbody id="leaderboardTable" class="divide-y divide-gray-700"></tbody>
        </table>
        <p id="leaderboardError" class="text-red-500 text-xs m-2"></p>
      </div>
    </section>

  </main>

  <footer class="text-center text-gray-500 text-sm py-4 bg-gray-950">
    &copy; 2025 PvPStealPvP • Competitive PvP community
  </footer>

<script>
  // Utility → show error
  function showError(elemId, msg) {
    document.getElementById(elemId).innerText = msg;
    console.error(msg);
  }

  // Load Leaderboard
  fetch('leaderboard.yml')
    .then(res => {
      if (!res.ok) throw new Error('HTTP ' + res.status + ' loading leaderboard');
      return res.text();
    })
    .then(yml => {
      const list = jsyaml.load(yml);
      if (!Array.isArray(list)) throw new Error('Leaderboard is not a list');
      const table = document.getElementById('leaderboardTable');
      list.forEach((entry, i) => {
        table.innerHTML += `
          <tr>
            <td class="p-3">${i + 1}</td>
            <td class="p-3">${entry.player || '??'}</td>
          </tr>`;
      });
    })
    .catch(err => showError('leaderboardError', err.message));

  // Load Staff
  fetch('staff.yml')
    .then(res => {
      if (!res.ok) throw new Error('HTTP ' + res.status + ' loading staff');
      return res.text();
    })
    .then(yml => {
      const staff = jsyaml.load(yml);
      if (!Array.isArray(staff)) throw new Error('Staff is not a list');
      const container = document.getElementById('staffList');
      staff.forEach(m => {
        const username = m.username || '??';
        const discord = m.discord || '';
        const role = m.role || '';
        container.innerHTML += `
          <div>
            <img src="https://minotar.net/avatar/${username}/60" class="mx-auto rounded-full mb-2" />
            <p><strong>${username}</strong><br>
            <span class="text-gray-300">${role}</span><br>
            <span class="text-gray-400">${discord}</span></p>
          </div>`;
      });
    })
    .catch(err => showError('staffError', err.message));
</script>

</body>
</html>
